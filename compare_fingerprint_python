from pyfingerprint.pyfingerprint import PyFingerprint
import pymtsql
conn=pymysql.connect(host="--.--.--.--",
                               user="---",
                               passwd="---",
                               db="---")
                               
try: 
    f= PyFingerprint('/dev/ttyAMA0', 57600, 0xFFFFFFFF, 0x00000000)
    if (f.verifyPassword() == False ):
              raise ValueError('The given fingerprint sensor password is wrong!')
            
except Exception as e:
        print('The fingerprint sensor could not be initialized!')
        print('Exception message:' + str(e))
        exit(1)
        
try: 
    print('Waiting for finger...')
  
    while(f.readImage() == False ):
          pass
 
 ##converts read image to characteristics and stores it in charbuffer 1
    f.convertImage(0x01)
    cur= conn.cursor()
    sql = "select * from finger_template"  # finger template 이름의 table
    cur. execute(sql,(characterics,'2','number2'))
    conn.commit()
    
execpt Execption as e:
    print('Operation failed!')
    print('Execption message:' + str(e))
    exit(1)
    
finally:
    conn.close()
